<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–¢–∞–±–ª–∏—Ü—è –∑ —Ñ–æ—Ä–º–æ—é —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- –º–∞–ª–µ–Ω—å–∫–∏–π –≤–ª–∞—Å–Ω–∏–π —Å—Ç–∏–ª—å –¥–ª—è –∫—É—Ä—Å–æ—Ä–∞‚Äë—Å—Ç—Ä—ñ–ª–æ—á–∫–∏ -->
    <style>
        .cursor-indicator { width: 1.5rem; text-align:center; }
    </style>
</head>
<body class="p-4">

<div class="container">
    <h3>–°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±—ñ–ª—ñ–≤</h3>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="alert alert-{{cat}} alert-dismissible fade show py-1" role="alert">
              {{msg}}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- —Ç–∞–±–ª–∏—Ü—è -->
    <table class="table table-sm table-bordered">
        <thead>
            <tr>
                <th></th>
                <th>ID</th>
                <th>–ù–∞–∑–≤–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
            </tr>
        </thead>
        <tbody>
        {% for row in rows %}
            <tr class="{% if row['ID'] == selected_id %}table-info{% endif %}">
                <td class="cursor-indicator">
                    {% if row['ID'] == selected_id %}üëâ{% endif %}
                </td>
                <td>{{row['ID']}}</td>
                <td>
                    <a href="{{ url_for('index', id=row['ID']) }}" class="text-decoration-none">
                        {{row['NAME']}}
                    </a>
                </td>
                <td>{{row['STATUS']}}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- —Ñ–æ—Ä–º–∞, —è–∫—â–æ –≤–∏–±—Ä–∞–Ω–æ –∑–∞–ø–∏—Å -->
    {% if selected_row %}
    <div class="card mt-4">
        <div class="card-header fw-bold">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Å¬†#{{selected_row['ID']}}</div>
        <div class="card-body">
            <form method="post" class="row g-3">
                <input type="hidden" name="ID" value="{{selected_row['ID']}}">
                <div class="col-md-6">
                    <label class="form-label">–ù–∞–∑–≤–∞</label>
                    <input type="text" name="NAME" value="{{selected_row['NAME']}}" class="form-control" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">–°—Ç–∞—Ç—É—Å</label>
                    <select name="STATUS" class="form-select">
                        {% for st in ['–ê–∫—Ç–∏–≤–Ω–∏–π','–û—á—ñ–∫—É—î','–ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π'] %}
                            <option value="{{st}}" {% if st==selected_row['STATUS'] %}selected{% endif %}>{{st}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-primary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    <a href="{{ url_for('index') }}" class="btn btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</a>
                </div>
            </form>
        </div>
    </div>
    {% endif %}
</div>

<!-- Bootstrap JS (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ, –ª–∏—à–µ –¥–ª—è alert‚Äëclose) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
